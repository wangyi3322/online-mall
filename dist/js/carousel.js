define(["jquery","event"],function(i,t){function n(i){this.init(i)}return n.prototype={init:function(i){var t=this.$pic=i.find(".pic");this.$pageIndex=i.find(".page-index"),this.$prev=i.find(".btn-prev"),this.$next=i.find(".btn-next");this.piclength=t.children().length,this.imgWidth=t.children().width(),this.isAnimation=!1,this.mark=0;var n=t.children().first().clone(),e=t.children().last().clone();t.append(n),t.prepend(e),t.width(this.imgWidth*t.children().length),t.css("left",-this.imgWidth),this.bind()},bind:function(){var i=this;this.$prev.on("click",function(){i.playPrev()}),this.$next.on("click",function(){i.playNext()}),this.$pageIndex.on("click","li",function(t){var n=t.target;i.playBullet(n),i.showBullet()})},playNext:function(){var i=this;this.isAnimation||(this.isAnimation=!0,this.$pic.animate({left:"-="+i.$pic.children().width()},function(){i.mark++,i.mark>i.piclength-1&&(i.$pic.css("left",-i.$pic.children().width()),i.mark=0),i.showBullet(),i.isAnimation=!1,t.fire("play",i.mark)}))},playPrev:function(){var i=this;this.isAnimation||(this.isAnimation=!0,this.$pic.animate({left:"+="+i.$pic.children().width()},function(){i.mark--,i.mark<0&&(i.$pic.css("left",-i.$pic.children().width()*i.piclength),i.mark=i.piclength-1),i.showBullet(),i.isAnimation=!1,t.fire("play",i.mark)}))},showBullet:function(){this.$pageIndex.children().removeClass("active").eq(this.mark).addClass("active")},playBullet:function(n){this.mark=this.$pageIndex.children().index(i(n)),this.$pic.animate({left:-(this.mark+1)*this.$pic.children().width()}),t.fire("play",this.mark)}},n});